\section{Design}

\subsection{Mechanical}

Our mechanical design work revolved around retrofitting our vehicle so
that it's possible for it to drive itself. We added a gas-spring
emergency brake, a brake-by-cable system, spring-loaded rear encoders,
and a water-proof trunk to protect our power distribution system. In
addition to this, we designed various mounts for sensors,
microcontrollers, and our car computer. We lean towards aluminum and
steel for rigidity and machinability when designing mechanical
components to add to the car. We use 3D-printed components made from
PETG filament for anything not load-bearing, and when possible, we
drill mounting holes into our car's frame to mount components.

\subsubsection{Emergency Brake (Parking Brake)}

We mounted a gas spring rated for 20 lbs of force to our vehicle's
parking brake and we hold it in the armed position during operation
using an electromagnet. On each end of the spring, we bolted aluminum
extrusions between 3D-printed spaces that are free to rotate. We
machined brackets from 1/4" aluminum sheet metal to attach the spring
to the aluminum extrusions and hold any 3D-printed pieces to the car.

\begin{figure}[ht!]
  \centering
  \includegraphics[width=0.5\textwidth]{ebrake-iso.pdf}
  \caption{CAD drawing of the parking brake assembly in the open position.}
\end{figure}

\subsubsection{Brake-by-Cable (BBC)}

We designed the Brake-By-Cable (BBC) system for fine control over
pressure in the master brake cylinder to better replicate a human
driver's control over the brake pedal. We designed the system based on
the constraint that it had to apply 100 lbs of force to displace the
brake pedal by two inches in less than a second. We designed the entire
assembly to fit in the small region between the master cylinder,
differential, and steering arms.

\begin{figure}[ht!]
  \centering
  \includegraphics[width=0.5\textwidth]{bbc-iso.pdf}
  \caption{CAD drawing of the BBC.}
\end{figure}

We chose a cable rated for 150 lbs to add a factor of safety. To reduce
our motor's torque requirements, we designed a 3:1 lever and machined
it from 1/4" steel. We connect the shorter side of the lever to the
brake pedal and the longer side to the DC motor. We machined a
three-inch steel pulley to be within the diameter recommended by the
manufacturer of our cable. We also machined an aluminum shaft coupler
to connect the top cable to our DC motor. For the DC motor, we chose it
such that the operating point of the system would be well below 20\% of
the motor's stall torque. Additionally, we added an extension spring to
the bottom of the lever to ensure that the cable stays in tension when
the motor releases the brake pedal.

We machined smaller pulleys from aluminum and used copper sleeves for
the cable terminations on the lever and brake pedal. Each termination
freely rotates using bronze bushing and shoulder bolts fastened to the
steel components. The large backplate covering the entire range of
motion of the lever is to ensure there are no pinch points in the
system. Each side of the lever also has an M6 shoulder bolt and a limit
switch so that our firmware can detect the end of the range of motion.

\subsubsection{Rear Encoder Mounts}

Critical for calculating odometry and velocity for the vehicle, this
year, we designed the rear encoders to have more precision and less
slip than the previous design. We designed and 3D printed a small wheel
(1.6 inches diameter) that directly attaches to the encoder shaft. This
wheel touches the inside of the car’s wheel so that we can measure the
tire's rotation. This geometry allows us to have over 30,000 counts per
tire rotation. To ensure that the encoder wheel does not slip and
maintains contact with the tire at all times, we designed a
spring-loaded bracket that connects with the previous encoder mount’s
bracket. The rotation point is an M8 shoulder bolt with thrust bearings
on each side of the 1/8th-inch aluminum bracket to ensure low-friction
rotation.

\begin{figure}[ht!]
  \centering
  \includegraphics[width=0.4\textwidth]{encoders-iso.pdf}
  \caption{CAD drawing of the rear encoders.}
\end{figure}

\subsubsection{Weather Proofing}

To protect the power distribution system from weather, we designed and
built a trunk that mounts to the back of the vehicle above the car
battery pack. We made the trunk's frame from 20mm aluminum extrusion,
held together with brackets made from a laser-cut 1/4" aluminum sheet.
We laser cut the trunk walls from 1/8" cast acrylic and fastened to the
aluminum extrusions. For ease of access, we mounted the circuit
breakers and under-voltage protection boards to the acrylic on top of
the trunk. We bolted the extrusion pieces to the chassis to ensure a
secure mount and used silicone caulk on the inside edges to ensure the
enclosure is weatherproof.

\newpage

\subsection{Electrical}

\subsection{Software}
